"use strict";/*! suggestify-engine v1.3.3
* (c) 2021 Max van der Schee
* @license MIT */class l{input;defaultItems;sortedItems;items;config;char;globalReg;constructor({defaultItems:t,sortedItems:r,options:s}){this.defaultItems=t,this.sortedItems=r,this.config={MIN_DISTANCE:s.MIN_DISTANCE|3,ITEM_CAP:s.ITEM_CAP|8,ITEM_CAP_ALT:s.ITEM_CAP*4|32}}async getResults(t){return this.input=t,this.globalReg=new RegExp(t.replace(/\W+/g,"|"),"i"),this.char=t.charAt(0),this.items=this.sortedItems[this.char]?this.sortedItems[this.char]:[],this.listFilter()}listFilter(){const t={match:[],alt:[]},r=h=>{this.globalReg.test(h)&&t.match.push(h)},s=h=>{this.levenshtein(h,this.input)<=this.config.MIN_DISTANCE&&t.alt.push(h)},e=()=>t.match.length>=this.config.ITEM_CAP,i=()=>t.alt.length>=this.config.ITEM_CAP_ALT;for(let h=0;h<this.items.length&&(r(this.items[h]),s(this.items[h]),!(e()||i()));h++);if(!e()&&!i())for(let h=0;h<this.defaultItems.length&&(r(this.defaultItems[h]),s(this.defaultItems[h]),!(e()||i()));h++);return[...new Set([...this.sortResults(this.input,t.match),...this.sortResults(this.input,t.alt)])].slice(0,this.config.ITEM_CAP)}sortResults(t,r){return r.sort((s,e)=>{const i=this.levenshtein(t,s),n=this.levenshtein(t,e);return i>n?1:i<n?-1:0})}levenshtein(t,r){if(!t.length)return r.length;if(!r.length)return t.length;const s=[];for(let e=0;e<=r.length;e++){s[e]=[e];for(let i=1;i<=t.length;i++)s[e][i]=e===0?i:Math.min(s[e-1][i]+1,s[e][i-1]+1,s[e-1][i-1]+(t[i-1]===r[e-1]?0:1))}return s[r.length][t.length]}}module.exports=l;
