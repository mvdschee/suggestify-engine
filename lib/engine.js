"use strict";var t=Object.defineProperty,e=(e,s,i)=>(((e,s,i)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i})(e,"symbol"!=typeof s?s+"":s,i),i);module.exports=
/*!
* suggestify-engine v1.3.0
* (c) 2021 Max van der Schee
* @license MIT
* Engine does Vroem Vroem..
*/
class{constructor({defaultItems:t,sortedItems:s,options:i}){e(this,"input"),e(this,"defaultItems"),e(this,"sortedItems"),e(this,"items"),e(this,"config"),e(this,"char"),e(this,"globalReg"),this.defaultItems=t,this.sortedItems=s,this.config={MIN_DISTANCE:3|i.MIN_DISTANCE,ITEM_CAP:8|i.ITEM_CAP}}async getResults(t){return this.input=t,this.globalReg=new RegExp(t.replace(/\W+/g,"|"),"i"),this.char=t.charAt(0),this.items=this.sortedItems[this.char]?this.sortedItems[this.char]:this.defaultItems,this.listFilter()}listFilter(){const t={match:[],alt:[]},e=e=>{this.globalReg.test(e)&&t.match.push(e)},s=e=>{this.levenshtein(e,this.input)<=this.config.MIN_DISTANCE&&t.alt.push(e)},i=e=>t[e].length>=this.config.ITEM_CAP;for(let h=0;h<this.items.length&&(e(this.items[h]),s(this.items[h]),!i("match")&&!i("alt"));h++);if(i("match")&&i("alt"))for(let h=0;h<this.defaultItems.length&&(e(this.defaultItems[h]),s(this.defaultItems[h]),!i("match")&&!i("alt"));h++);return[...new Set([...this.sortResults(this.input,t.match),...this.sortResults(this.input,t.alt)])].slice(0,this.config.ITEM_CAP)}sortResults(t,e){return e.sort(((e,s)=>{const i=this.levenshtein(t,e),h=this.levenshtein(t,s);return i>h?1:i<h?-1:0}))}levenshtein(t,e){if(!t.length)return e.length;if(!e.length)return t.length;const s=[];for(let i=0;i<=e.length;i++){s[i]=[i];for(let h=1;h<=t.length;h++)s[i][h]=0===i?h:Math.min(s[i-1][h]+1,s[i][h-1]+1,s[i-1][h-1]+(t[h-1]===e[i-1]?0:1))}return s[e.length][t.length]}};
